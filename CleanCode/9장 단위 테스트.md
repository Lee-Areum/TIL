# 9장. 단위 테스트

TDD : Test Driven Development

실제 코드를 짜기 전에 단위 테스트부터 작성하라

### TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제코드 작성

### 깨끗한 테스트 코드 유지하기

실제 코드가 변화하면 테스트 코드도 변해야 한다.

테스트 코드는 실제 코드 못지 않게 중요하다.

**테스트는 유연성, 유지보수성, 재사용성을 제공한다.**

### 깨끗한 테스트 코드

테스트 코드에서도 가독성이 중요하다

BUILD-OPERATE-CHECK 패턴

- 테스트 자료를 만들고
- 테스트 자료를 조작
- 조작한 결과가 올바른지 확인

**도메인에 특화된 테스트 언어**

도메인에 특화된 언어(DSL)로 테스트 코드를 구현하는 기법

**이중표준**

실제 환경과 테스트 환경은 요구사항이 다르다

테스트 코드는 단숞나고 간결하고 표현력이 풍부해야하지만, 실제 코드만큼 효율적일 필요는 없다

더 가독성을 높일 수 있다면 몇가지 규칙은 위배해도 된다.

### 테스트 당 assert 하나

assert문 개수는 최대한 줄여야 좋다.

### 테스트당 개념 하나

→ 개념 당 assert문 수를 최소로 줄여라

→ 테스트 함수 하나는 개념 하나만 테스트 하라

### F.I.R.S.T

깨끗한 테스트를 위한 규칙

- FAST(빠르게) : 테스트는 빨리 돌아야 한다.
- Independentt(독립적으로)
    
    각 테스트는 서로 의존하면 안된다.
    
    각 테스트는 독립적이고 순서가 없어야 한다.
    
- Repeatable(반복가능하게)
    
    어떤 환경에서도 반복 가능해야 한다.
    
- Self-Validating(자가검증하는)
    
    테스트는 bool값으로 결과를 내야한다.
    
- Timely(적시에)
    
    단위 테스트는 실제 코드를 구현하기 직전에 구현한다.
    
    이 후에 하게 되면 테스트가 불가능하도록 실제 코드를 설계할지도 모른다.